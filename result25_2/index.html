<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>View Result</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        /* Custom CSS for additional styling */
        #omr img {
            max-width: 100%;
            height: auto;
        }
    </style>
</head>

<body>
    <div class="container mt-5">
        <h1 class="text-center">View Recent Exam Result</h1>
        <div class="row">
            <!-- Form Section -->
            <div class="col-md-12">
                <form id="sillyForm">
                    <div class="form-group">
                        <label for="name">Name:</label>
                        <input type="text" class="form-control" id="name" required>
                        <label for="exam">Exam:</label>
                        <select id="exam" class="form-control" required>
                            <option value="PHY308" selected>Physics 1st Paper - Periodic Motion</option>
                            <option value="PHY307">Physics 1st Paper - Structural Properties of Matter</option>
                            <option value="PHY306">Physics 1st Paper - Gravitation and Gravity</option>
                            <option value="PHY305">Physics 1st Paper - Work, Energy and Power</option>
                            <option value="PHY304">Physics 1st Paper - Newtonian Mechanics</option>
                            <option value="vector25_mcq_1">Physics 1st Paper - Vector</option>
                        </select>
                    </div>
                    <center><button type="submit" class="btn btn-primary">View Result</button></center>
                </form>
            </div>
        </div>
        <br/>
        <br/>
        <h2 align="center" id="examName"></h2>
        <div class="row">
            <!-- Individual Result Section -->
            <div class="col-md-8">
                <center>
                    <div id="indiv_res_header">
                    </div>
                    <p id="error" class="text-danger text-center"></p>
                    <p id="participant"></p>
                    <p id="position"></p>
                    <p id="grade"></p>
                    <div id="omr"></div>
                </center>
            </div>
            <div class="col-md-4">
                <div id="standings_header">
                </div>
                <ul class="list-group" id="standingsList">
                    <!-- Standings will be dynamically added here -->
                </ul>
            </div>
        </div>
    </div>

    <script>
        // dynamic data starts

const data = {
    "vector25_mcq_1": {
        "Toufiq": {
            "score": 33.75,
            "correct": 35,
            "wrong": 13,
            "unanswered": 0,
            "auto": 2,
            "wrong_list": [
                5,
                6,
                8,
                9,
                10,
                12,
                17,
                18,
                24,
                25,
                36,
                38,
                40
            ],
            "unanswered_list": [],
            "auto_list": [
                13,
                42
            ]
        },
        "Dip": {
            "score": 26.5,
            "correct": 27,
            "wrong": 10,
            "unanswered": 11,
            "auto": 2,
            "wrong_list": [
                2,
                12,
                21,
                22,
                23,
                26,
                31,
                39,
                46,
                47
            ],
            "unanswered_list": [
                3,
                5,
                6,
                13,
                17,
                27,
                32,
                34,
                35,
                37,
                42
            ],
            "auto_list": [
                15,
                16
            ]
        },
        "Rafid": {
            "score": 45.0,
            "correct": 44,
            "wrong": 4,
            "unanswered": 0,
            "auto": 2,
            "wrong_list": [
                3,
                19,
                41,
                42
            ],
            "unanswered_list": [],
            "auto_list": [
                17,
                44
            ]
        },
        "Zayed": {
            "score": 33.75,
            "correct": 35,
            "wrong": 13,
            "unanswered": 0,
            "auto": 2,
            "wrong_list": [
                5,
                6,
                19,
                20,
                26,
                29,
                30,
                32,
                35,
                36,
                37,
                42,
                48
            ],
            "unanswered_list": [],
            "auto_list": [
                17,
                38
            ]
        }
    },
    "PHY303": {
        "Zayed": {
            "score": 13.75,
            "correct": 21,
            "wrong": 37,
            "unanswered": 0,
            "auto": 2,
            "wrong_list": [
                2,
                6,
                7,
                9,
                13,
                14,
                15,
                16,
                17,
                20,
                25,
                26,
                27,
                28,
                29,
                30,
                31,
                32,
                33,
                37,
                39,
                40,
                41,
                43,
                44,
                45,
                46,
                47,
                48,
                49,
                51,
                52,
                54,
                55,
                56,
                57,
                60
            ],
            "unanswered_list": [],
            "auto_list": [
                18,
                50
            ]
        }
    },
    "PHY305": {
        "Dip": {
            "score": 23.0,
            "correct": 21,
            "wrong": 8,
            "unanswered": 27,
            "auto": 4,
            "wrong_list": [
                1,
                3,
                14,
                16,
                19,
                20,
                37,
                41
            ],
            "unanswered_list": [
                5,
                6,
                10,
                17,
                18,
                21,
                25,
                31,
                32,
                35,
                36,
                39,
                43,
                45,
                46,
                47,
                48,
                49,
                50,
                52,
                53,
                54,
                55,
                56,
                57,
                58,
                60
            ],
            "auto_list": [
                12,
                44,
                51,
                59
            ]
        },
        "Zayed": {
            "score": 40.0,
            "correct": 40,
            "wrong": 16,
            "unanswered": 0,
            "auto": 4,
            "wrong_list": [
                1,
                3,
                4,
                5,
                6,
                10,
                20,
                23,
                24,
                25,
                35,
                36,
                38,
                45,
                52,
                58
            ],
            "unanswered_list": [],
            "auto_list": [
                12,
                44,
                51,
                59
            ]
        },
        "Rafid": {
            "score": 40.75,
            "correct": 38,
            "wrong": 5,
            "unanswered": 13,
            "auto": 4,
            "wrong_list": [
                9,
                16,
                19,
                21,
                40
            ],
            "unanswered_list": [
                1,
                3,
                5,
                14,
                17,
                23,
                26,
                31,
                42,
                47,
                52,
                53,
                58
            ],
            "auto_list": [
                12,
                44,
                51,
                59
            ]
        },
        "Toufiq": {
            "score": 23.0,
            "correct": 20,
            "wrong": 4,
            "unanswered": 32,
            "auto": 4,
            "wrong_list": [
                16,
                19,
                52,
                55
            ],
            "unanswered_list": [
                3,
                5,
                10,
                11,
                20,
                21,
                23,
                25,
                26,
                28,
                29,
                30,
                31,
                32,
                33,
                34,
                35,
                36,
                37,
                38,
                39,
                40,
                41,
                42,
                43,
                45,
                46,
                47,
                48,
                49,
                50,
                53
            ],
            "auto_list": [
                12,
                44,
                51,
                59
            ]
        }
    },
    "PHY306": {
        "Rafid": {
            "score": 43.0,
            "correct": 44,
            "wrong": 8,
            "unanswered": 7,
            "auto": 1,
            "wrong_list": [
                10,
                16,
                23,
                25,
                34,
                50,
                52,
                59
            ],
            "unanswered_list": [
                2,
                4,
                6,
                26,
                33,
                53,
                55
            ],
            "auto_list": [
                32
            ]
        },
        "Zayed": {
            "score": 42.5,
            "correct": 45,
            "wrong": 14,
            "unanswered": 0,
            "auto": 1,
            "wrong_list": [
                4,
                9,
                10,
                11,
                15,
                23,
                25,
                30,
                34,
                50,
                52,
                54,
                55,
                56
            ],
            "unanswered_list": [],
            "auto_list": [
                32
            ]
        },
        "Dip": {
            "score": 22.75,
            "correct": 24,
            "wrong": 9,
            "unanswered": 26,
            "auto": 1,
            "wrong_list": [
                1,
                4,
                10,
                11,
                16,
                31,
                33,
                34,
                37
            ],
            "unanswered_list": [
                2,
                15,
                20,
                36,
                38,
                39,
                41,
                42,
                43,
                44,
                45,
                46,
                47,
                48,
                49,
                50,
                51,
                52,
                53,
                54,
                55,
                56,
                57,
                58,
                59,
                60
            ],
            "auto_list": [
                32
            ]
        },
        "Toufiq": {
            "score": 13.25,
            "correct": 17,
            "wrong": 19,
            "unanswered": 23,
            "auto": 1,
            "wrong_list": [
                3,
                4,
                8,
                10,
                11,
                15,
                16,
                17,
                18,
                20,
                21,
                23,
                28,
                29,
                30,
                33,
                34,
                36,
                38
            ],
            "unanswered_list": [
                31,
                39,
                40,
                41,
                42,
                43,
                44,
                45,
                46,
                47,
                48,
                49,
                50,
                51,
                52,
                53,
                54,
                55,
                56,
                57,
                58,
                59,
                60
            ],
            "auto_list": [
                32
            ]
        }
    },
    "PHY308": {
        "Rafid": {
            "score": 50.75,
            "correct": 49,
            "wrong": 5,
            "unanswered": 3,
            "auto": 3,
            "wrong_list": [
                2,
                13,
                41,
                52,
                55
            ],
            "unanswered_list": [
                16,
                34,
                39
            ],
            "auto_list": [
                20,
                42,
                51
            ]
        },
        "Zayed": {
            "score": 53.75,
            "correct": 52,
            "wrong": 5,
            "unanswered": 0,
            "auto": 3,
            "wrong_list": [
                4,
                13,
                16,
                34,
                55
            ],
            "unanswered_list": [],
            "auto_list": [
                20,
                42,
                51
            ]
        },
        "Dip": {
            "score": 31.75,
            "correct": 31,
            "wrong": 9,
            "unanswered": 17,
            "auto": 3,
            "wrong_list": [
                4,
                6,
                8,
                12,
                13,
                21,
                26,
                34,
                41
            ],
            "unanswered_list": [
                3,
                5,
                36,
                46,
                47,
                48,
                49,
                50,
                52,
                53,
                54,
                55,
                56,
                57,
                58,
                59,
                60
            ],
            "auto_list": [
                20,
                42,
                51
            ]
        },
        "Toufiq": {
            "score": 32.0,
            "correct": 31,
            "wrong": 8,
            "unanswered": 18,
            "auto": 3,
            "wrong_list": [
                3,
                4,
                13,
                16,
                26,
                32,
                45,
                57
            ],
            "unanswered_list": [
                5,
                6,
                19,
                21,
                25,
                27,
                28,
                34,
                38,
                47,
                48,
                49,
                50,
                52,
                53,
                54,
                55,
                56
            ],
            "auto_list": [
                20,
                42,
                51
            ]
        }
    },
    "PHY307": {
        "Rafid": {
            "score": 34.0,
            "correct": 33,
            "wrong": 8,
            "unanswered": 6,
            "auto": 3,
            "wrong_list": [
                8,
                20,
                27,
                30,
                33,
                35,
                44,
                45
            ],
            "unanswered_list": [
                5,
                10,
                11,
                40,
                42,
                46
            ],
            "auto_list": [
                21,
                28,
                43
            ]
        },
        "Zayed": {
            "score": 31.25,
            "correct": 32,
            "wrong": 15,
            "unanswered": 0,
            "auto": 3,
            "wrong_list": [
                2,
                11,
                18,
                20,
                27,
                30,
                33,
                35,
                36,
                39,
                40,
                42,
                44,
                46,
                48
            ],
            "unanswered_list": [],
            "auto_list": [
                21,
                28,
                43
            ]
        },
        "Dip": {
            "score": 27.5,
            "correct": 27,
            "wrong": 10,
            "unanswered": 10,
            "auto": 3,
            "wrong_list": [
                2,
                6,
                7,
                18,
                20,
                27,
                30,
                33,
                35,
                39
            ],
            "unanswered_list": [
                5,
                26,
                42,
                44,
                45,
                46,
                47,
                48,
                49,
                50
            ],
            "auto_list": [
                21,
                28,
                43
            ]
        },
        "Toufiq": {
            "score": 32.75,
            "correct": 32,
            "wrong": 9,
            "unanswered": 6,
            "auto": 3,
            "wrong_list": [
                3,
                8,
                14,
                20,
                27,
                35,
                42,
                44,
                45
            ],
            "unanswered_list": [
                1,
                5,
                30,
                39,
                46,
                48
            ],
            "auto_list": [
                21,
                28,
                43
            ]
        }
    }
}

// dynamic data ends

// dynamic positions start

const positions = {
    "vector25_mcq_1": {
        "Toufiq": 2,
        "Dip": 4,
        "Rafid": 1,
        "Zayed": 2
    },
    "PHY303": {
        "Zayed": 1
    },
    "PHY305": {
        "Dip": 3,
        "Zayed": 2,
        "Rafid": 1,
        "Toufiq": 3
    },
    "PHY306": {
        "Rafid": 1,
        "Zayed": 2,
        "Dip": 3,
        "Toufiq": 4
    },
    "PHY308": {
        "Rafid": 2,
        "Zayed": 1,
        "Dip": 4,
        "Toufiq": 3
    },
    "PHY307": {
        "Rafid": 1,
        "Zayed": 3,
        "Dip": 4,
        "Toufiq": 2
    }
}

// dynamic positions end

        function stuff() {
            let name = document.getElementById("name").value;
            var e = document.getElementById("exam");
            const examName = e.options[e.selectedIndex].text.split(" - ")[1];
            let exam = e.value;
            name = name.trim();
            // name = name.toLowerCase();
            // name = name.charAt(0).toUpperCase() + name.slice(1);
            if (name.length === 0) {
                document.getElementById("error").innerHTML = "<font color='red'>Enter a name first!</font>";
            } else {
                try {
                    let score = "Total Score: " + data[exam][name]["score"]
                    let correct = "Total Correct: " + data[exam][name]["correct"]
                    let wrong = "Total Wrong: " + data[exam][name]["wrong"]
                    let unanswered = "Total Unanswered: " + data[exam][name]["unanswered"]
                    let auto = "Total Auto: " + data[exam][name]["auto"]
                    let wrong_list_str = "Wrong List: ";
                    for (let i = 0; i < data[exam][name]["wrong_list"].length; i++) {
                        wrong_list_str += data[exam][name]["wrong_list"][i];
                        if (i < data[exam][name]["wrong_list"].length - 1) {
                            wrong_list_str += ", ";
                        }
                    }
                    let unanswered_list_str = "Unanswered List: ";
                    for (let i = 0; i < data[exam][name]["unanswered_list"].length; i++) {
                        unanswered_list_str += data[exam][name]["unanswered_list"][i];
                        if (i < data[exam][name]["unanswered_list"].length - 1) {
                            unanswered_list_str += ", ";
                        }
                    }
                    let auto_list_str = "Auto List: ";
                    if (data[exam][name]["auto_list"].length === 0) {
                        auto_list_str += "<empty>";
                    }
                    for (let i = 0; i < data[exam][name]["auto_list"].length; i++) {
                        auto_list_str += data[exam][name]["auto_list"][i];
                        if (i < data[exam][name]["auto_list"].length - 1) {
                            auto_list_str += ", ";
                        }
                    }
                    document.getElementById("error").innerHTML = "";

                    document.getElementById("indiv_res_header").innerHTML = "<h3 class='text-center'>Individual Result</h3>"
                    document.getElementById("examName").innerHTML = "<h2>" + examName + " MCQ Result</h2>";
                    document.getElementById("participant").innerHTML = "<h4>Name: " + name + "</h4>";
                    document.getElementById("position").innerHTML = "<h5>Position: " + positions[exam][name] + "/" + (Object.keys(positions[exam]).length); + "</h4>";
                    document.getElementById("grade").innerHTML = "<h5>" + score + "</h4>\n";
                    document.getElementById("grade").innerHTML += "<font color='green'>" + correct + "</font><br>\n";
                    if (parseInt(wrong.split(":")[1]) !== 0) {
                        document.getElementById("grade").innerHTML += "<font color='red'>" + wrong + "</font><br>\n";
                        document.getElementById("grade").innerHTML += "<font color='red'>" + wrong_list_str + "</font><br>\n";
                    }
                    if (parseInt(unanswered.split(":")[1]) !== 0) {
                        document.getElementById("grade").innerHTML += "<font color='blue'>" + unanswered + "</font><br>\n";
                        document.getElementById("grade").innerHTML += "<font color='blue'>" + unanswered_list_str + "</font><br>\n";
                    }
                    if (parseInt(auto.split(":")[1]) !== 0) {
                        document.getElementById("grade").innerHTML += "<font color='green'>" + auto + "</font><br>\n";
                        document.getElementById("grade").innerHTML += "<font color='green'>" + auto_list_str + "</font><br><br>\n";
                    }
                    document.getElementById("omr").innerHTML = "<a href='" + exam + "_" + name + ".jpg' download class='btn btn-primary'>Download OMR Sheet</a><br><br>\n<img src='" + exam + "_" + name + ".jpg'/>"
                } catch (e) {
                    document.getElementById("error").innerHTML = "<font color='red'>ফাঁকিবাজটা পরীক্ষা দেয় নাই!!</font>";
                    document.getElementById("examName").innerHTML = "";
                    document.getElementById("participant").innerHTML = "";
                    document.getElementById("position").innerHTML = "";
                    document.getElementById("grade").innerHTML = "";
                    document.getElementById("omr").innerHTML = "";
                }

                document.getElementById("standings_header").innerHTML = "<h3 class='text-center'>Standings</h3>"
                document.getElementById("standingsList").innerHTML = "";
                Object.entries(positions[exam]).forEach(([key, value]) => {
                    document.getElementById("standingsList").innerHTML += `<li class='list-group-item'><center>${key} : ${value} / ${(Object.keys(positions[exam]).length)}</center></li>`;
                });
            }
        }

        document.getElementById("exam").addEventListener("change", function (event) {
            stuff();
        });

        document.getElementById("sillyForm").addEventListener("submit", function (event) {
            event.preventDefault();
            stuff();
        });

    </script>

</body>

</html>

